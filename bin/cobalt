#!/usr/bin/env node

// Logging
var winston = require('winston')

// Command line arguments
var argv = require('minimist')(process.argv.slice(2))
var port = argv.p || argv.port || process.env.PORT || 4242
process.env.COBALT_MONGO_URI =  argv.d || argv.databaseURI || process.env.COBALT_MONGO_URI || 'mongodb://localhost/cobalt'

// Express app
var app = require('../lib/index').Server

// Start listening
var server = app.listen(port, function() {
  winston.info('Cobalt is listening at http://localhost:' + server.address().port)
})
